{"ast":null,"code":"import _slicedToArray from\"/Users/pagnavath/Desktop/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// const [token, setToken] = useState(\"\");\n// function handleSubmitUserLogin(e) {\n//     e.preventDefault();\n//     axios.post(\"http://localhost:9000/auth/signin\", {\n//         email: email,\n//         password: password\n//     }).then(data => {\n//         const getToken = data.data.token;\n//         setToken(getToken);\n//     }).catch(err => {\n//         console.log(err);\n//     })\n// }\n// useEffect(() => {\n//     if (token !== \"\") {\n//         localStorage.setItem(\"token\", token);\n//     }\n// }, [token]);\n// const [isLoggedIn, setIsLoggedIn] = useState(false);\n// useEffect(() => {\n//     axios.post(\"http://localhost:9000/auth\", {\n//         headers: {\n//             \"Authorization\": `Bearer ${token}`\n//         }\n//     }).then(data => {\n//         console.log(data);\n//     }).catch(err => {\n//         return err;\n//     });\n// }, [])\nvar handleUserLogin=function handleUserLogin(e){e.preventDefault();axios.post(process.env.REACT_APP_LOGIN_BACKEND,{email:email,password:password}).then(function(data){console.log(data);var token=data.data.token;localStorage.setItem(\"token\",token);}).catch(function(err){console.log(err);});};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUser=_useState6[0],setIsUser=_useState6[1];useEffect(function(){var headers={'Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))};axios.get(\"http://localhost:9000/auth/auth\",{headers:headers}).then(function(data){if(data.data===\"SUCCESS\"){setIsUser(true);// console.log(data)\n}}).catch(function(err){console.log(err);});axios.get(\"http://localhost:9000/auth/collection\",{'Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}).then(function(data){console.log(data);}).catch(function(err){return console.log(err);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:!isUser&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUserLogin,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email...\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password...\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Or \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Create An Account\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","Link","axios","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","handleUserLogin","e","preventDefault","post","process","env","REACT_APP_LOGIN_BACKEND","then","data","console","log","token","localStorage","setItem","catch","err","_useState5","_useState6","isUser","setIsUser","headers","concat","getItem","get","className","children","onSubmit","type","placeholder","value","onChange","target","required","to"],"sources":["/Users/pagnavath/Desktop/e-commerce/src/Pages/Login.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nexport default function Login() {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    // const [token, setToken] = useState(\"\");\n    // function handleSubmitUserLogin(e) {\n    //     e.preventDefault();\n    //     axios.post(\"http://localhost:9000/auth/signin\", {\n    //         email: email,\n    //         password: password\n    //     }).then(data => {\n    //         const getToken = data.data.token;\n    //         setToken(getToken);\n    //     }).catch(err => {\n    //         console.log(err);\n    //     })\n    // }\n    // useEffect(() => {\n    //     if (token !== \"\") {\n    //         localStorage.setItem(\"token\", token);\n    //     }\n    // }, [token]);\n    // const [isLoggedIn, setIsLoggedIn] = useState(false);\n    // useEffect(() => {\n    //     axios.post(\"http://localhost:9000/auth\", {\n    //         headers: {\n    //             \"Authorization\": `Bearer ${token}`\n    //         }\n    //     }).then(data => {\n    //         console.log(data);\n    //     }).catch(err => {\n    //         return err;\n    //     });\n    // }, [])\n    const handleUserLogin = (e) => {\n        e.preventDefault();\n        axios.post(process.env.REACT_APP_LOGIN_BACKEND, {\n            email: email,\n            password: password\n        }).then(data => {\n            console.log(data);\n            const token = data.data.token;\n            localStorage.setItem(\"token\", token);\n        }).catch(err => {\n            console.log(err);\n        })\n    }\n    const [isUser, setIsUser] = useState(false);\n    useEffect(() => {\n        const headers = { 'Authorization': `Bearer ${localStorage.getItem(\"token\")}` };\n        axios.get(\"http://localhost:9000/auth/auth\", {headers}).then(data => {\n            if (data.data === \"SUCCESS\") {\n                setIsUser(true);\n                // console.log(data)\n            }\n        }).catch(err => {\n            console.log(err);\n        })\n        axios.get(\"http://localhost:9000/auth/collection\", { 'Authorization': `Bearer ${localStorage.getItem(\"token\")}` }).then(data => {\n            console.log(data);\n        }).catch(err => console.log(err))\n    }, [])\n    return (\n        <div className=\"login\">\n            {!isUser && <form onSubmit={handleUserLogin}>\n                <h1>Login</h1>\n                <input type=\"email\" placeholder=\"Email...\" value={email} onChange={e => setEmail(e.target.value)} required/>\n                <input type=\"password\" placeholder=\"Password...\" value={password} onChange={e => setPassword(e.target.value)} required />\n                <button type=\"submit\">Login</button>\n                <p>Or <Link to={\"/signup\"}>Create An Account</Link></p>\n            </form>}\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}